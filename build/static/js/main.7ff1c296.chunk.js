(this["webpackJsonpthe-phonebook"]=this["webpackJsonpthe-phonebook"]||[]).push([[0],{16:function(e,n,t){e.exports=t(39)},21:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(15),o=t.n(c),u=(t(21),t(5)),l=t(2),i=t(4),s=function(e){var n=e.contact,t=n.number,a=n.name,c=n.id,o=e.handleDelete;return r.a.createElement("li",null,a," - ",t,r.a.createElement("button",{onClick:function(){return o(c,a)}},"delete"))},m=function(e){var n=e.contacts,t=e.find,c=e.handleDelete;return r.a.createElement(a.Fragment,null,r.a.createElement("h2",null,"Contacts"),r.a.createElement("ul",{style:{listStyle:"none"}},n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})).map((function(e){return r.a.createElement(s,{key:e.id,contact:e,handleDelete:c})}))))},d=function(e){var n=e.handleSubmit,t=e.handleChange,a=e.newContact;return r.a.createElement("form",{onSubmit:n},r.a.createElement("div",null,"name:"," ",r.a.createElement("input",{onChange:t,value:a.name,name:"name",placeholder:"add name...",required:!0}),"number:"," ",r.a.createElement("input",{onChange:t,value:a.number,name:"number",placeholder:"add number...",required:!0})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},f=function(e){var n=e.handleFind,t=e.find;return r.a.createElement(a.Fragment,null,"find: ",r.a.createElement("input",{onChange:n,value:t}))},p=function(e){var n=e.alert,t=n.type,a=n.message;return""===t?null:r.a.createElement("div",{className:t},a)},h=t(3),b=t.n(h),g="/api/persons",E=function(){var e=Object(a.useState)(""),n=Object(i.a)(e,2),t=n[0],c=n[1],o=Object(a.useState)([]),s=Object(i.a)(o,2),h=s[0],E=s[1],v=Object(a.useState)({type:"",message:""}),y=Object(i.a)(v,2),C=y[0],j=y[1],O=Object(a.useState)({name:"",number:""}),w=Object(i.a)(O,2),S=w[0],k=w[1],D=function(){return setTimeout((function(){return j({type:"",message:""})}),3e3)};Object(a.useEffect)((function(){b.a.get(g).then((function(e){return e.data})).then((function(e){return E(e)})).catch((function(e){console.log(e.response),j({type:"fail",message:e.response.data.error}),D()}))}),[]);return r.a.createElement(a.Fragment,null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(f,{handleFind:function(e){return c(e.target.value)},find:t}),r.a.createElement("br",null),r.a.createElement(d,{handleSubmit:function(e){e.preventDefault();var n,t,a,r=h.find((function(e){return S.name.toLowerCase()===e.name.toLowerCase()}));if(r){if(window.confirm("Would you like to update ".concat(r.name,"'s number?"))){var c=Object(l.a)(Object(l.a)({},r),{},{number:S.number});(t=r.id,a=c,b.a.put("".concat(g,"/").concat(t),a).then((function(e){return e.data}))).then((function(e){E(h.map((function(n){return n.id===e.id?e:n}))),j({type:"success",message:"Contact updated"}),D()})).catch((function(e){console.log(e.response),j({type:"fail",message:e.response.data.error}),D()})),k({name:"",number:""})}}else(n=S,b.a.post(g,n).then((function(e){return e.data}))).then((function(e){E(h.concat(e)),j({type:"success",message:"Contact added"}),D()})).catch((function(e){console.log(e.response),j({type:"fail",message:e.response.data.error}),D()})),k({name:"",number:""})},handleChange:function(e){k(Object(l.a)(Object(l.a)({},S),{},Object(u.a)({},e.target.name,e.target.value)))},newContact:S}),r.a.createElement("br",null),r.a.createElement(p,{alert:C}),r.a.createElement(m,{contacts:h,find:t,handleDelete:function(e,n){window.confirm("Delete ".concat(n,"?"))&&function(e){return b.a.delete("".concat(g,"/").concat(e)).then((function(e){return e.data}))}(e).then((function(){E(h.filter((function(n){return n.id!==e}))),j({type:"success",message:"Contact deleted"}),D()})).catch((function(e){console.log(e.response),j({type:"fail",message:e.response.data.error}),D()}))}}))};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(E,null)),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.7ff1c296.chunk.js.map